# å›½é™…åŒ–ï¼ˆi18nï¼‰ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬åº”ç”¨ä½¿ç”¨ i18next å’Œ react-i18next å®ç°å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒã€‚

## å½“å‰æ”¯æŒçš„è¯­è¨€

- ğŸ‡ºğŸ‡¸ **English** (en) - é»˜è®¤è¯­è¨€
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡** (zh) - ç®€ä½“ä¸­æ–‡

## æ–‡ä»¶ç»“æ„

```
src/i18n/
â”œâ”€â”€ index.ts              # i18n é…ç½®
â””â”€â”€ locales/
    â”œâ”€â”€ en.json          # è‹±æ–‡ç¿»è¯‘
    â””â”€â”€ zh.json          # ä¸­æ–‡ç¿»è¯‘
```

## åœ¨ç»„ä»¶ä¸­ä½¿ç”¨

### åŸºæœ¬ç”¨æ³•

```tsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  
  return (
    <div>
      <h1>{t('app.name')}</h1>
      <p>{t('app.description')}</p>
    </div>
  );
}
```

### å¸¦å‚æ•°çš„ç¿»è¯‘

```tsx
const { t } = useTranslation();

// ç¿»è¯‘æ–‡ä»¶ä¸­ï¼š
// "welcome": "Welcome, {{name}}!"

return <p>{t('welcome', { name: 'John' })}</p>;
// è¾“å‡ºï¼šWelcome, John!
```

### å¤æ•°å½¢å¼

```tsx
// ç¿»è¯‘æ–‡ä»¶ä¸­ï¼š
// "items": "{{count}} item",
// "items_plural": "{{count}} items"

return <p>{t('items', { count: 5 })}</p>;
// è¾“å‡ºï¼š5 items
```

## æ·»åŠ æ–°è¯­è¨€

### 1. åˆ›å»ºç¿»è¯‘æ–‡ä»¶

åœ¨ `src/i18n/locales/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ JSON æ–‡ä»¶ï¼Œä¾‹å¦‚ `fr.json`ï¼ˆæ³•è¯­ï¼‰ï¼š

```json
{
  "app": {
    "name": "Compresseur d'Images Intelligent",
    "tagline": "Compression rapide, sÃ©curisÃ©e et efficace",
    ...
  },
  ...
}
```

### 2. æ›´æ–° i18n é…ç½®

ç¼–è¾‘ `src/i18n/index.ts`ï¼š

```typescript
import fr from './locales/fr.json';

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: en },
      zh: { translation: zh },
      fr: { translation: fr }, // æ·»åŠ æ–°è¯­è¨€
    },
    // ...
  });
```

### 3. æ›´æ–°è¯­è¨€åˆ‡æ¢å™¨

ç¼–è¾‘ `src/components/LanguageSwitcher.tsx`ï¼š

```typescript
const languages = [
  { code: 'en', name: 'English', nativeName: 'English' },
  { code: 'zh', name: 'Chinese', nativeName: 'ä¸­æ–‡' },
  { code: 'fr', name: 'French', nativeName: 'FranÃ§ais' }, // æ·»åŠ æ–°è¯­è¨€
];
```

### 4. æ›´æ–° SEO ç»„ä»¶

ç¼–è¾‘ `src/components/SEO.tsx`ï¼Œæ·»åŠ æ–°çš„ hreflang æ ‡ç­¾ï¼š

```tsx
<link rel="alternate" hrefLang="fr" href="https://yourwebsite.com/?lang=fr" />
```

### 5. æ›´æ–° sitemap

ç¼–è¾‘ `public/sitemap.xml`ï¼Œæ·»åŠ æ–°è¯­è¨€çš„é“¾æ¥ï¼š

```xml
<xhtml:link rel="alternate" hreflang="fr" href="https://yourwebsite.com/?lang=fr"/>
```

## ç¿»è¯‘æ–‡ä»¶ç»“æ„

### æ¨èçš„é”®å‘½åè§„èŒƒ

```json
{
  "section": {
    "subsection": {
      "key": "value"
    }
  }
}
```

### ç¤ºä¾‹

```json
{
  "app": {
    "name": "åº”ç”¨åç§°",
    "tagline": "æ ‡è¯­"
  },
  "header": {
    "title": "æ ‡é¢˜",
    "subtitle": "å‰¯æ ‡é¢˜"
  },
  "settings": {
    "title": "è®¾ç½®",
    "quality": "è´¨é‡"
  }
}
```

## æœ€ä½³å®è·µ

### 1. ä¿æŒé”®åä¸€è‡´

æ‰€æœ‰è¯­è¨€æ–‡ä»¶åº”è¯¥æœ‰ç›¸åŒçš„é”®ç»“æ„ï¼š

```json
// en.json
{
  "button": {
    "submit": "Submit",
    "cancel": "Cancel"
  }
}

// zh.json
{
  "button": {
    "submit": "æäº¤",
    "cancel": "å–æ¶ˆ"
  }
}
```

### 2. ä½¿ç”¨å‘½åç©ºé—´

å¯¹äºå¤§å‹åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ç»„ç»‡ç¿»è¯‘ï¼š

```typescript
// ä½¿ç”¨å‘½åç©ºé—´
const { t } = useTranslation('common');
t('button.submit');
```

### 3. æå–å¸¸ç”¨æ–‡æœ¬

å°†å¸¸ç”¨çš„æ–‡æœ¬ï¼ˆå¦‚æŒ‰é’®æ ‡ç­¾ï¼‰æ”¾åœ¨é¡¶å±‚ï¼š

```json
{
  "common": {
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete"
  }
}
```

### 4. ä½¿ç”¨æè¿°æ€§é”®å

```json
// âŒ ä¸å¥½
{
  "text1": "Welcome",
  "text2": "Goodbye"
}

// âœ… å¥½
{
  "welcome": {
    "greeting": "Welcome",
    "farewell": "Goodbye"
  }
}
```

### 5. å¤„ç†é•¿æ–‡æœ¬

å¯¹äºé•¿æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–æ¢è¡Œï¼š

```json
{
  "longText": "This is a very long text that spans multiple lines and contains a lot of information."
}
```

## è¯­è¨€æ£€æµ‹

åº”ç”¨ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæ£€æµ‹è¯­è¨€ï¼š

1. localStorage ä¸­ä¿å­˜çš„è¯­è¨€åå¥½
2. æµè§ˆå™¨è¯­è¨€è®¾ç½®
3. é»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰

## æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€

ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ‡æ¢è¯­è¨€ï¼š

1. ç‚¹å‡»å³ä¸Šè§’çš„åœ°çƒå›¾æ ‡
2. ä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©è¯­è¨€
3. é€‰æ‹©ä¼šè‡ªåŠ¨ä¿å­˜åˆ° localStorage

## æµ‹è¯•ç¿»è¯‘

### 1. æ£€æŸ¥ç¼ºå¤±çš„é”®

```bash
# æ¯”è¾ƒä¸¤ä¸ªç¿»è¯‘æ–‡ä»¶
diff <(jq -S 'keys' src/i18n/locales/en.json) <(jq -S 'keys' src/i18n/locales/zh.json)
```

### 2. éªŒè¯ JSON æ ¼å¼

```bash
# éªŒè¯ JSON æ–‡ä»¶
cat src/i18n/locales/en.json | jq .
```

### 3. æµ‹è¯•æ‰€æœ‰è¯­è¨€

åœ¨æµè§ˆå™¨ä¸­ï¼š
1. åˆ‡æ¢åˆ°æ¯ç§è¯­è¨€
2. æ£€æŸ¥æ‰€æœ‰é¡µé¢å’ŒåŠŸèƒ½
3. ç¡®ä¿æ²¡æœ‰æ˜¾ç¤ºé”®åè€Œä¸æ˜¯ç¿»è¯‘æ–‡æœ¬

## å¸¸è§é—®é¢˜

### Q: ç¿»è¯‘ä¸æ˜¾ç¤ºï¼Œæ˜¾ç¤ºçš„æ˜¯é”®å

**A**: æ£€æŸ¥ï¼š
1. é”®åæ˜¯å¦æ­£ç¡®
2. ç¿»è¯‘æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¯¼å…¥
3. JSON æ ¼å¼æ˜¯å¦æ­£ç¡®

### Q: è¯­è¨€åˆ‡æ¢åé¡µé¢æ²¡æœ‰æ›´æ–°

**A**: ç¡®ä¿ç»„ä»¶ä½¿ç”¨äº† `useTranslation` hookï¼Œè€Œä¸æ˜¯ç›´æ¥å¯¼å…¥ç¿»è¯‘æ–‡ä»¶ã€‚

### Q: å¦‚ä½•å¤„ç† HTML å†…å®¹

**A**: ä½¿ç”¨ `Trans` ç»„ä»¶ï¼š

```tsx
import { Trans } from 'react-i18next';

<Trans i18nKey="welcome">
  Welcome to <strong>our app</strong>!
</Trans>
```

### Q: å¦‚ä½•å¤„ç†æ—¥æœŸå’Œæ•°å­—æ ¼å¼

**A**: ä½¿ç”¨ i18next çš„æ ¼å¼åŒ–åŠŸèƒ½ï¼š

```typescript
// é…ç½®
i18n.init({
  interpolation: {
    format: (value, format, lng) => {
      if (format === 'number') {
        return new Intl.NumberFormat(lng).format(value);
      }
      if (format === 'date') {
        return new Intl.DateTimeFormat(lng).format(value);
      }
      return value;
    }
  }
});

// ä½¿ç”¨
t('date', { date: new Date(), formatParams: { date: { format: 'date' } } })
```

## è´¡çŒ®ç¿»è¯‘

å¦‚æœæ‚¨æƒ³ä¸ºåº”ç”¨æ·»åŠ æ–°è¯­è¨€æˆ–æ”¹è¿›ç°æœ‰ç¿»è¯‘ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºæ–°çš„ç¿»è¯‘æ–‡ä»¶æˆ–ç¼–è¾‘ç°æœ‰æ–‡ä»¶
3. ç¡®ä¿æ‰€æœ‰é”®éƒ½å·²ç¿»è¯‘
4. æµ‹è¯•ç¿»è¯‘
5. æäº¤ Pull Request

## èµ„æº

- [i18next å®˜æ–¹æ–‡æ¡£](https://www.i18next.com/)
- [react-i18next å®˜æ–¹æ–‡æ¡£](https://react.i18next.com/)
- [i18next æµè§ˆå™¨è¯­è¨€æ£€æµ‹](https://github.com/i18next/i18next-browser-languageDetector)
